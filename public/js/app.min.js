function qsa(e,t){var t=t||document;return[].slice.call(t.querySelectorAll(e))}function ObjectMap(e){function t(e,t){var o=e,n=t;if(i.lockEdges){var s=-i.map.offsetWidth+i.viewingBox.offsetWidth,a=-i.map.offsetHeight+i.viewingBox.offsetHeight;o=s>o?s:o,n=a>n?a:n,o=o>0?0:o,n=n>0?0:n}i.map.style.left=o+"px",i.map.style.top=n+"px"}function o(e,t,o){e.attachEvent?(e["e"+t+o]=o,e[t+o]=function(){e["e"+t+o](window.event)},e.attachEvent("on"+t,e[t+o])):e.addEventListener(t,o,!1)}function n(e,t){this.x=e,this.y=t}var i=this;i.map=document.getElementById(e.id),i.width="undefined"==typeof e.width?100:e.width,i.height="undefined"==typeof e.height?100:e.height,i.scrolling="undefined"==typeof e.scrolling?!0:e.scrolling,i.scrollTime="undefined"==typeof e.scrollTime?300:e.scrollTime,i.lockEdges="undefined"==typeof e.lockEdges?!0:e.lockEdges,i.viewingBox=document.createElement("div"),"undefined"!=typeof e.cssClass&&(i.viewingBox.className=e.cssClass),i.mousePosition=new n,i.mouseLocations=[],i.velocity=new n,i.mouseDown=!1,i.timerId=-1,i.timerCount=0,i.map.parentNode.replaceChild(i.viewingBox,i.map),i.viewingBox.appendChild(i.map),i.viewingBox.style.overflow="hidden",i.viewingBox.style.width=i.width+"%",i.viewingBox.style.height=i.height+"%",i.viewingBox.style.position="relative",i.map.style.position="absolute",t("undefined"==typeof e.startX?0:-e.startX,"undefined"==typeof e.startY?0:-e.startY);var s=function(e){var o=e.clientX-i.mousePosition.x+parseInt(i.map.style.left),n=e.clientY-i.mousePosition.y+parseInt(i.map.style.top);t(o,n),i.mousePosition.x=e.clientX,i.mousePosition.y=e.clientY},a=function(){if(i.mouseDown)i.mouseLocations.unshift(new n(i.mousePosition.x,i.mousePosition.y)),i.mouseLocations.length>10&&i.mouseLocations.pop();else{var e=i.scrollTime/20,o=(e-i.timerCount)/e,s=i.velocity.x*o,a=i.velocity.y*o;t(-s+parseInt(i.map.style.left),-a+parseInt(i.map.style.top)),i.timerCount==e&&(clearInterval(i.timerId),i.timerId=-1),++i.timerCount}};o(i.viewingBox,"mousedown",function(e){i.viewingBox.style.cursor="grabbing",document.getElementById("objectMap").className="grabbing",i.mousePosition.x=e.clientX,i.mousePosition.y=e.clientY,o(document,"mousemove",s),i.mouseDown=!0,i.scrolling&&(i.timerCount=0,0!=i.timerId&&(clearInterval(i.timerId),i.timerId=0),i.timerId=setInterval(a,20))}),o(document,"mouseup",function(e){if(i.mouseDown){var t=s;if(document.detachEvent?(document.detachEvent("onmousemove",document["mousemove"+t]),document["mousemove"+t]=null):document.removeEventListener("mousemove",t,!1),i.mouseDown=!1,i.mouseLocations.length>0){var o=i.mouseLocations.length;i.velocity.x=(i.mouseLocations[o-1].x-i.mouseLocations[0].x)/o,i.velocity.y=(i.mouseLocations[o-1].y-i.mouseLocations[0].y)/o,i.mouseLocations.length=0}}i.viewingBox.style.cursor="auto",document.getElementById("objectMap").className="",e.target.classList.contains("drawer__link--active")||e.target.parentNode.classList.contains("drawer__contents")||qsa(".drawer__link").forEach(function(e){e.classList.remove("drawer__link--active")})})}document.addEventListener("DOMContentLoaded",function(){var e=navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|webOS)/),t=document.querySelector("#objectMap");if(e)left=Math.floor(Math.random()*getComputedStyle(t).width+1),top=Math.floor(Math.random()*getComputedStyle(t).height+1),setTimeout(function(){$("html, body").animate({scrollTop:"0px",scrollLeft:left},0)});else{new ObjectMap({id:"objectMap",height:100,width:100,startX:200,startY:200,cssClass:"mappy"});left=Math.floor(Math.random()*parseFloat(getComputedStyle(t).width)),top=Math.floor(Math.random()*parseFloat(getComputedStyle(t).height)),t.style.left=-left+"px",t.style.top=-top+"px"}qsa(".drawer__link").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),this.classList.toggle("drawer__link--active")})}),document.querySelector(".site-header__contact").addEventListener("click",function(e){e.preventDefault(),document.querySelector(".dialog").classList.add("dialog--active")}),document.querySelector(".dialog__close").addEventListener("click",function(e){e.preventDefault(),document.querySelector(".dialog").classList.remove("dialog--active")})});